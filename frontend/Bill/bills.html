<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H√≥a ƒë∆°n</title>
    <link rel="stylesheet" href="bills.css">
</head>
<div class="topbar">
    <h2> Qu·∫£n l√Ω h√≥a ƒë∆°n</h2>
    <button class="logout" onclick="dangXuat()">ƒêƒÉng xu·∫•t</button>
</div>

<div class="wrapper">

    <div class="sidebar">
        <h3>üìå MENU</h3>

        <button onclick="chuyenTrang('dashboard.html')"> Dashboard</button>
        <button class="staff" onclick="chuyenTrang('rooms.html')"> Qu·∫£n l√Ω ph√≤ng</button>
        <button class="staff" onclick="chuyenTrang('tenants.html')"> Ng∆∞·ªùi thu√™</button>
        <button class="staff" onclick="chuyenTrang('contracts.html')"> H·ª£p ƒë·ªìng</button>
        <button class="staff" onclick="chuyenTrang('bills.html')"> H√≥a ƒë∆°n</button>
        <button class="staff" onclick="chuyenTrang('meters.html')"> ƒêi·ªán n∆∞·ªõc</button>
        <button class="staff" onclick="chuyenTrang('reports.html')"> Th·ªëng k√™</button>

        <button class="owner" onclick="chuyenTrang('accounts.html')"> Qu·∫£n l√Ω t√†i
            kho·∫£n</button>
        <button class="owner" onclick="chuyenTrang('settings.html')"> C√†i ƒë·∫∑t h·ªá
            th·ªëng</button>

        <button class="tenant" onclick="chuyenTrang('my-bills.html')"> H√≥a ƒë∆°n c·ªßa
            t√¥i</button>
        <button class="tenant" onclick="chuyenTrang('notifications.html')"> Th√¥ng
            b√°o</button>
    </div>

    <div class="main">

        <div class="card stats">
            <div class="stat">
                <h2 id="tongHoaDon">0</h2>
                <p>T·ªïng h√≥a ƒë∆°n</p>
            </div>
            <div class="stat">
                <h2 id="daThanhToan">0</h2>
                <p>ƒê√£ thanh to√°n</p>
            </div>
            <div class="stat">
                <h2 id="chuaThanhToan">0</h2>
                <p>Ch∆∞a thanh to√°n</p>
            </div>
        </div>

        <div class="card">
            <table>
                <thead>
                    <tr>
                        <th>M√£ h√≥a ƒë∆°n</th>
                        <th>Ph√≤ng</th>
                        <th>Th√°ng</th>
                        <th>T·ªïng ti·ªÅn (VNƒê)</th>
                        <th>Ng√†y t·∫°o</th>
                        <th>Tr·∫°ng th√°i</th>
                    </tr>
                </thead>
                <tbody id="danhSachHoaDon"></tbody>
            </table>
        </div>

    </div>
</div>

<script>
    const vaiTro = localStorage.getItem("role");
    if (!vaiTro) location.href = "login.html";

    if (vaiTro === "chutro") {
        document.querySelectorAll(".tenant").forEach(e => e.style.display = "none");
    } else if (vaiTro === "nhanvien") {
        document.querySelectorAll(".tenant,.owner[data-page='settings.html']").forEach(e => e.style.display = "none");
    } else if (vaiTro === "nguoithue") {
        document.querySelectorAll(".staff,.owner").forEach(e => e.style.display = "none");
    }
    document.querySelectorAll(".sidebar button").forEach(btn => {
        if (btn.textContent.includes("H√≥a ƒë∆°n")) btn.classList.add("active");
    });

    let hoaDon = [
        { ma: "HD001", phong: "P101", thang: "01/2026", tong: 3500000, ngay: "2026-02-01", trangThai: "ƒê√£ thanh to√°n" },
        { ma: "HD002", phong: "P102", thang: "01/2026", tong: 3200000, ngay: "2026-02-01", trangThai: "Ch∆∞a thanh to√°n" },
        { ma: "HD003", phong: "P103", thang: "12/2025", tong: 3000000, ngay: "2026-01-01", trangThai: "ƒê√£ thanh to√°n" },
    ];

    const tbody = document.getElementById("danhSachHoaDon");
    const tong = document.getElementById("tongHoaDon");
    const daTT = document.getElementById("daThanhToan");
    const chuaTT = document.getElementById("chuaThanhToan");

    function capNhatThongKe() {
        tong.innerText = hoaDon.length;
        daTT.innerText = hoaDon.filter(x => x.trangThai === "ƒê√£ thanh to√°n").length;
        chuaTT.innerText = hoaDon.filter(x => x.trangThai === "Ch∆∞a thanh to√°n").length;
    }

    function hienThiDanhSach() {
        tbody.innerHTML = "";
        hoaDon.forEach(x => {
            const mau = x.trangThai === "ƒê√£ thanh to√°n" ? "green" : "red";
            tbody.innerHTML += `
                <tr>
                    <td>${x.ma}</td>
                    <td>${x.phong}</td>
                    <td>${x.thang}</td>
                    <td>${x.tong.toLocaleString()}</td>
                    <td>${x.ngay}</td>
                    <td><span class="badge ${mau}">${x.trangThai}</span></td>
                </tr>`;
        });
        capNhatThongKe();
    }

    hienThiDanhSach();

    function chuyenTrang(p) {
        if (p === 'dashboard.html') location.href = '../Dashboard/dashboard.html';
        else if (p === 'tenants.html') location.href = '../Tenant/tenants.html';
        else if (p === 'bills.html') location.href = '../Bill/bills.html';
        else location.href = p;
    }

    function dangXuat() {
        localStorage.clear();
        location.href = "../Login/login.html";
    }
</script>


<body>

</body>

</html>